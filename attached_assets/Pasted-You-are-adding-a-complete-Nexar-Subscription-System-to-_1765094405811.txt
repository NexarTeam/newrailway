You are adding a complete Nexar+ Subscription System to NexarOS.  
This is a single-tier subscription priced at ¬£4.99/month.

The Nexar+ subscription includes:
1. 120-minute Game Trials (selected games only)
2. Nexar Store Discounts (on selected titles only)
3. Exclusive Themes & Wallpapers
4. Nexar+ Free Games Library Section

All subscription logic must use Stripe subscriptions and the existing JWT auth system.

=====================================================
        üî¥ UPDATE USER MODEL FOR SUBSCRIPTIONS
=====================================================

In backend/data/users.json, add:

"subscription": {
  "active": false,
  "renewalDate": "",
  "stripeCustomerId": "",
  "stripeSubscriptionId": ""
}

=====================================================
       üî¥ BACKEND GAME METADATA REQUIREMENTS
=====================================================

Modify game metadata (backend/data/games.json) to support trials + discounts:

Each game may optionally include:

"trialEnabled": true/false,
"trialDurationMinutes": 120,     // default for Nexar+ trials
"nexarPlusDiscount": 0-100,       // percent discount
"inNexarPlusCollection": true/false

=====================================================
           üî¥ USER TRIAL TRACKING STRUCTURE
=====================================================

Add to user model:

"trialUsage": {
    "gameId123": {
        "minutesPlayed": 0,
        "expired": false
    }
}

=====================================================
           üî¥ STRIPE SUBSCRIPTION SETUP
=====================================================

You must create backend subscription routes:

1. POST /subscription/createCheckoutSession
Body: none
Process:
- Create Stripe Checkout Session for a recurring subscription (¬£4.99/month).
- Include metadata: { userId }
- Return session.url

2. POST /subscription/webhook
- Validate webhook signature
- On "customer.subscription.created":
    - Set user.subscription.active = true
    - Save renewalDate from Stripe
    - Save stripeCustomerId + stripeSubscriptionId
- On "customer.subscription.updated":
    - Update renewal date
- On "customer.subscription.deleted" or "canceled":
    - Set user.subscription.active = false

3. GET /subscription/status
Return:
{
  "active": boolean,
  "renewalDate": "...",
  "stripeSubscriptionId": "..."
}

4. POST /subscription/cancel
- Cancels Stripe subscription via API
- Sets user.subscription.active = false

=====================================================
         üî¥ BACKEND FOR GAME TRIAL ENFORCEMENT
=====================================================

Create:

POST /games/trial/check
Body: { gameId }

Process:
- If game has trialEnabled = false ‚Üí deny trial
- If user does NOT have an active Nexar+ subscription ‚Üí deny trial
- Load user's trialUsage[gameId]
- If expired ‚Üí deny
- Return:
  { allowed: true, minutesRemaining }

POST /games/trial/update
Body: { gameId, minutesPlayed }
- Increment trialUsage[gameId].minutesPlayed
- If minutesPlayed >= 120 ‚Üí set expired = true

=====================================================
       üî¥ BACKEND FOR NEXAR+ FREE GAMES ACCESS
=====================================================

Modify game launch route:

Before launching:
- If game.inNexarPlusCollection == true:
    * Require active subscription
    * If inactive ‚Üí return error: ‚ÄúRequires Nexar+ subscription.‚Äù

=====================================================
         üî¥ BACKEND FOR STORE DISCOUNT LOGIC
=====================================================

In purchase route (/wallet/purchase):

If user.subscription.active == true AND game.nexarPlusDiscount > 0:
    discountedPrice = basePrice * (1 - (discount / 100))
Else:
    discountedPrice = basePrice

Save final purchase price to transactionHistory.

=====================================================
             üî¥ FRONTEND (REACT) UPDATES
=====================================================

Add new UI pages/components:

-----------------------------------------------------
1. Nexar+ Subscription Page (/nexar-plus)
-----------------------------------------------------
Shows:
- Price: ¬£4.99/month
- List of benefits:
  * 120-minute trials on supported games
  * Discounts on selected Nexar Store titles
  * Exclusive themes & animated wallpapers
  * Nexar+ Free Games section
- Button: ‚ÄúSubscribe with Stripe‚Äù
  ‚Üí calls /subscription/createCheckoutSession ‚Üí opens returned URL

If user already subscribed:
- Show renewal date
- Button: Cancel Subscription

-----------------------------------------------------
2. Library Sidebar: "Nexar+ Free Games"
-----------------------------------------------------
Show games where metadata.inNexarPlusCollection == true.

If subscription inactive:
- Show lock icon
- Prompt: ‚ÄúSubscribe to access Nexar+ Free Games‚Äù

-----------------------------------------------------
3. Game Details Page
-----------------------------------------------------
If trialEnabled == true and user has Nexar+:
- Show button: ‚ÄúPlay 120-Minute Trial‚Äù
If trial expired:
- Show: ‚ÄúTrial used ‚Äî purchase to continue.‚Äù

If game has discount:
- Show discounted price and original price.

-----------------------------------------------------
4. Themes Page (Settings ‚Üí Themes)
-----------------------------------------------------
For each theme:
- If theme.premium == true AND !subscription.active:
    * Lock the theme
    * Show "Nexar+ Required"

-----------------------------------------------------
5. Subscription Badge
-----------------------------------------------------
On user profile:
- Display Nexar+ badge if subscription.active == true

=====================================================
             üî¥ SECURITY RULES
=====================================================
- Must validate ALL subscription statuses server-side.
- Never trust client for discounts.
- Trial timers MUST ONLY increment server-side.
- Stripe webhook must be the ONLY method to activate subscription.
- All trial requests must require JWT.

=====================================================
           üî¥ FINAL INTEGRATION CHECK
=====================================================
Ensure that:

1. Stripe subscription checkout works  
2. Webhook activates subscription correctly  
3. Trial timer updates and enforces 120 minutes  
4. Nexar+ Free Games are blocked/unblocked correctly  
5. Store discounts apply only to subscribers  
6. Premium themes lock/unlock properly  
7. UI uses Nexar dark/red styling  

=====================================================
Generate the full updated backend + frontend files now.
=====================================================
